<!DOCTYPE html>
<html>

<head>
    <title>kellyjandrews</title>
    <link rel='stylesheet' href='/assets/css/styles.css' type='text/css' media='all' />
    <script src="/assets/js/bundle.js"></script>
    <link rel="alternate" type="application/rss+xml" title="kellyjandrews" href="/rss/">
    <link rel="canonical" href="http://kellyjandrews.com/" />
</head>


<body>
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="row">
    <div class="col-md-6">
      <header class="site-header">
        <h1>
            <a href="/" title="kellyjandrews">kelly j andrews</a>
        </h1>
    </header>
</div>
    <div class="col-md-6 text-right">
      <a href="/experience" class="navlink"><i class="fa fa-info-circle fa-2x"></i></a>
      <a href="https://github.com/kellyjandrews" target="_blank"><i class="fa fa-github fa-2x"></i></a>
      <a href="https://twitter.com/kellyjandrews" target="_blank" ><i class="fa fa-twitter fa-2x"></i></a>
      <a href="https://www.linkedin.com/in/kjandrews/en" target="_blank" ><i class="fa fa-linkedin fa-2x"></i></a>
      <a href="https://stackexchange.com/users/2222625/kelly-j-andrews" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
  </div>
  </div>
  </div>
</nav>


    <div class="container-fluid">
        <div class="padded">
	<div class="col-md-8 col-md-offset-2">
  <h1>Data Driven React Components</h1>
<h2 id="making-this-thing-useful">Making This Thing Useful</h2>
<p>If you have been following along with my data grid tutorial - we don’t really have much going on yet. So far I’ve only mocked up a representation of what the final data grid will look like. This is not entirely useful. The next step is to use real data.</p>

<h2 id="react-data-flow">React Data Flow</h2>
<p>In order to think about how this works together, we need to approach this in the React way of doing things. In the <code class="highlighter-rouge">app.jsx</code> file, this is where our main data grid component lives - and it’s a composite component made up of other, smaller components.</p>

<p>It’s important to understand how React uses it’s data - from the owner to the ownee. It seperates concerns into the individual components, and makes your applications easier to understand what’s going on. If none of this makes sense - keep going, and it should clear things up.</p>

<h3 id="starting-point">Starting Point</h3>
<p>First things first - we need some data.  The data set is overly contrived, but it will help prove out the concept. I’ve added a <code class="highlighter-rouge">data.js</code> file to my root directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/* data.js */</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">[{</span>
    <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"Lacota"</span><span class="p">,</span>
    <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"Mason"</span>
<span class="p">},</span>
<span class="p">...</span>
<span class="p">]</span>
</code></pre>
</div>

<p>I used a <a href="http://www.generatedata.com/">data generator</a> to produce 100 objects containing <code class="highlighter-rouge">firstName</code> and <code class="highlighter-rouge">lastName</code>. With the ES6 syntax, the data is exported and useable in my component.</p>

<p>With the example data created, include that in the <code class="highlighter-rouge">app.jsx</code> file, and pass the data into the <code class="highlighter-rouge">&lt;DataGrid /&gt;</code> component, like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/* app.jsx */</span>
<span class="p">...</span>
<span class="kr">import</span> <span class="nx">Data</span> <span class="nx">from</span> <span class="s1">'../data.js'</span>
<span class="p">...</span>
<span class="nx">React</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">DataGrid</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">Data</span><span class="p">}</span> <span class="sr">/&gt;, document.getElementById</span><span class="se">(</span><span class="sr">'dataGrid'</span><span class="se">))</span><span class="err">;
</span></code></pre>
</div>

<p>React uses a one-way data binding, so the data starts at the parent level, and passes it down to the children.  The data is being passed to the <code class="highlighter-rouge">&lt;DataTable /&gt;</code> component, but it’s not actually using it. Just a little more work to get there.</p>

<p>###Props and State
React uses two variables, <code class="highlighter-rouge">props</code> and <code class="highlighter-rouge">state</code> to work with data.  The <code class="highlighter-rouge">props</code> data object contains everything passed into a component. The docs expain <code class="highlighter-rouge">state</code> absolutely perfect with</p>

<blockquote>
  <p>State should contain data that a component’s event handlers may change to trigger a UI update.</p>
</blockquote>

<p>If you can think of <code class="highlighter-rouge">state</code> as the data that needs to be changed somehow - then you should be ok.  It’s tricky at first, but I’m hoping these tutorials will help demystify it a bit.</p>

<p>We passed in the <code class="highlighter-rouge">data</code> prop, which is now available in our <code class="highlighter-rouge">DataTable</code> class.  Using ES6 modules, React is slightly different with ES6 - but changes are small.  With ES6, you use constructor methods, and set the state there:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/* app.jsx */</span>
<span class="kr">class</span> <span class="nx">DataGrid</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">data</span><span class="p">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">};</span>
  <span class="p">}</span>
</code></pre>
</div>

<p>The constructor method takes the <code class="highlighter-rouge">props</code> data object in, and runs <code class="highlighter-rouge">super()</code>, which may be unfamiiar to any JavaScript developer who hasn’t used classes in other languages. <code class="highlighter-rouge">super()</code> runs the parent functions the current class is extending. In other words, what ever <code class="highlighter-rouge">React.Component</code> is doing to set it self up, <code class="highlighter-rouge">DataGrid</code> will do the same thing. You can then do other tasks here to set up your class.  Specifically, we are setting the classes <code class="highlighter-rouge">state</code> to be <code class="highlighter-rouge"><span class="p">{</span><span class="err">data:</span><span class="w"> </span><span class="err">props.data</span><span class="p">}</span></code>.</p>

<p>##Actually Using The Data
Currently, we have an array with 100 objects, and we are passing that into our <code class="highlighter-rouge">&lt;DataGrid /&gt;</code> component as the <code class="highlighter-rouge">data</code> prop, and then set the inital data set in our <code class="highlighter-rouge">state</code> object.  With me so far?</p>

<p>Here is where the data finally gets used:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/* app.jsx */</span>
<span class="p">...</span>
<span class="o">&lt;</span><span class="nx">DataTable</span> <span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span><span class="p">...</span>
</code></pre>
</div>

<p>Save that, wait for reload, and magic! Wait - no. Still the same.  Why, you ask?  Because we are passing the data to the <code class="highlighter-rouge">&lt;DataTable /&gt;</code> component, but it has no clue we are doing that yet. Let’s change that so it’s expecting the data, and uses it to build out our rows.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/* datatable.jsx */</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dataRows</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>
    <span class="k">return</span><span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">tr</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">key</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">td</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"col-xs-6"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/td</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">td</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"col-xs-6"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/td</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/tr</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">});</span>
  <span class="p">...</span>
</code></pre>
</div>

<p>In the <code class="highlighter-rouge">&lt;DataTable /&gt;</code> component, I’m adding the variable <code class="highlighter-rouge">dataRows</code> to the top of the <code class="highlighter-rouge">render()</code> method. The component will pull in each row, and return a <code class="highlighter-rouge">&lt;tr&gt;</code> with the appropriate data. Since each row is unique in the array, we also need to include the <code class="highlighter-rouge">key</code> property. This helps React out when we update data and need to rerender everything. You can read more in depth about that <a href="http://facebook.github.io/react/docs/multiple-components.html#dynamic-children">here</a>.</p>

<p>In our <code class="highlighter-rouge">&lt;tbody&gt;</code> tag, we can now render out the <code class="highlighter-rouge">dataRows</code> variable like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cm">/* datatable.jsx */</span>
<span class="p">...</span>
<span class="o">&lt;</span><span class="nx">tbody</span><span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">dataRows</span><span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/tbody</span><span class="err">&gt;
</span><span class="p">...</span>
</code></pre>
</div>

<p>Now the data table renders out with the data passed to it. This is still very static, and only serves our current purpose of two columns.  That’s ok for now - we can come back later and modify to allow various data sets dynamically.</p>

<p>Also, in the repo you will see that I added some additional styles to fix the header to the top. This feels more like a data grid should, as opposed to a table where the header scrolls as well.</p>

<h2 id="wrap-up">Wrap Up</h2>
<p>This is just the start of the data grid being interactive. Now that we have live data, the next steps will include working with the pagination to update the data grid so that it will react to page changes and keep the data up-to-date accordingly.</p>

<p>I’ve update my <a href="https://github.com/kellyjandrews/react-tutorial/tree/modular-build">GitHub repo</a> with the source code from this tutorial.</p>



  <h4>React Data Grid Tutorials</h4>
  <ol>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      <li><a href="/2015/03/30/react-up-and-running.html" title="React - Up and Running">React - Up and Running</a></li>
      
    
  
    
      
      <li><a href="/2015/04/01/modular-react-components-with-browserify.html" title="Modular React Components With Browserify">Modular React Components With Browserify</a></li>
      
    
  
    
      
      <li class="active">Data Driven React Components</li>
      
    
  
    
  
    
      
      <li><a href="/2015/04/13/react-component-communication.html" title="React Component Communication">React Component Communication</a></li>
      
    
  
    
      
      <li><a href="/2015/04/20/refactoring-react-data-grid.html" title="Refactoring React Data Grid">Refactoring React Data Grid</a></li>
      
    
  
    
      
      <li><a href="/2015/04/21/data-filtering-for-react.html" title="Data Filtering for React">Data Filtering for React</a></li>
      
    
  
  </ol>



<div id="disqus_thread"></div>
   <script type="text/javascript">
       /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
       var disqus_shortname = 'kellyjandrews'; // required: replace example with your forum shortname
       var disqus_title = "Data Driven React Components";
       /* * * DON'T EDIT BELOW THIS LINE * * */
       (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
   </script>
   <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

</div>

    </div>

    <footer class="text-center">
    <small>All content copyright <a href="/">kelly j andrews</a> &copy; 2016 &bull; All rights reserved.</small>
    </a>
</footer>

    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-47461674-1', 'kellyjandrews.com');
    ga('send', 'pageview');
</script>
</body>

</html>
